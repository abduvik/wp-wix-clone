<?php

//$key_resource = openssl_pkey_new([
//    "digest_alg" => 'sha512',
//    "private_key_bits" => 4096,
//    "private_key_type" => OPENSSL_KEYTYPE_RSA
//]);
//$public_key = openssl_pkey_get_details($key_resource)['key'];
//
//openssl_pkey_export($key_resource, $private_key);

$public_key = '-----BEGIN PUBLIC KEY-----
MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAzd96tuvYp9JkJo+FDxF+
M4YeQjf3DFjiTZNc5grudy6pSx2vOf7MXfgsos7RhfZP5MYSJcjHdV2X0HlrPCYp
gp2odb5LVRGAFK2rIvUsRaL/JmCEjMtZCqJVw9iFZ+P18ktbTqbqgDI9VS4rRdnj
LkBQLvLo29NgPqbWIDMSQHnouYSCfo9tOTcTUZ/xwc2wsT3vEkRI1dWll9WXr8rh
voWLPWekXgEA9mAFndwsP78VtL3SA6DhNlhLUq8JVOjCAGqF52Z+Z3fnNFr8bRaV
VGykKzeUq6d2s2T4OJEtLSe8Lj0oKLGMWu+8x+FFBa1F5eL41k3KTOVMN/IXs6CQ
JeuoV/+Ufw6f88nithbLC9uaa5MXp+RAU9BHAcZ/RqWeBkAccjPKGtOO20XsNAwV
MiViTuu/Q+yft6K36SXN5HJgO2agiP49YUSGCVUmCJt19bgELf8YpiYFG6cXK9Xm
PQTUp/qG4VGtV4hzGOVcb5PXpPoZwbQhZPKii86bs7Nnwm9q3aOmtEdUBsi4ecNx
TywRqgx7rmPdd/vIEG9bYBKNPJEnO57k/NP0XwVyCOBUApNMW3vgTRfls25blaYK
gvA9MZgcTCfDtHf2OneOsmQaA1Yqnsho2IY5WJQw6pAgiDwuxi7zFDLZOPgQTcoi
Y2qYfLMinlXaYQ+veerzKf8CAwEAAQ==
-----END PUBLIC KEY-----';

$private_key = '-----BEGIN PRIVATE KEY-----
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
R770egGCxw0FOdK0m8crIzEuwtWoPV7/
-----END PRIVATE KEY-----';

$data = ['test' => 12333];
openssl_private_encrypt(json_encode($data), $encrypted, $private_key);
$base64Enc = urlencode(base64_encode($encrypted));

$base64Enc = 'Xnuheo%2FzzmBS79y0%2Bo4M0rIlYFyJJCxnMpf%2BdUmAMqjn8EJF1UzoFmKZNoZ%2FkbXac%2FMrQCtntw0Ed%2BO8chWOxw0FKfaAZz%2B5qzl4maYlM3Wpl8ESlFVnStbHTclGZSbQ%2BwUY5b0v%2Fp1YJuk367%2Fkc0o5FmppcmdZqA5eDiSGjUBbmobxZ0oL6yOxdatbjF8UDGGSM3ou98hV9E3%2FzAbwAqupOSbDqp%2BabJ%2B7dy3%2FXooeRU8ODl8F1GSPUneD5HKtpMggLRykHg3F1xAn4AlKGh31hR628WbLv3tD7qCstlfP%2FZphH%2F2ksNimWA51zQ0pCPhms9gKrIEQH8KsxRtoNtWy3ZCVUuHBbJdRNa6nDQEJ0c95VgeOf6PkC6M4XP3Tpw6rZecG%2FoVuTGtNRSY%2BDqOzscY68ZdWFlAceET0Nzqt5qxltfVLhgP3NadOyvjp0ld27KMi3pPskMCdWen6TapWitYvbntyX5R3vJ3UK0yPuFzqfAVyRumvTNXejuZwt%2FTM7lp0unWHHVX2pbTxILiws5bfqMcXdgZHDywdTGgO0FR%2FE4HOZNdcxL2YTpZc%2FdGzyhjpbVCWneRXLBn6UBVKQ9RBMdMf0uqzGebgoqvvCkdNFpOiVtedHg%2BVB03DAl6NC8qKQSjYzwLGTHmyYd83mk0XW61bHCH%2FkRMj2BI%3D';

$base64UnEnc = base64_decode(urldecode($base64Enc));
openssl_public_decrypt($base64UnEnc, $decrypted, $public_key);


echo $decrypted;